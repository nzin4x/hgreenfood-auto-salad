# 📖 사용자 가이드

## 🚀 시작하기

### 1. 프로그램 실행
```bash
python main.py
```

### 2. 메인 메뉴
```
============================================================
🍽️ 현대오토에버 점심식단 자동 예약 프로그램
============================================================

📋 메뉴를 선택하세요:

1. 프로그램 시작 (자동 예약 실행)
2. 마스터 패스워드 변경
3. 환경 설정 재생성
4. 선호 식단 순서 변경
5. 예약 금지 날짜 관리 (휴가 등)
0. 종료
```

**💡 팁**: Enter만 누르면 1번(프로그램 시작)이 자동 선택됩니다.

---

## 🔧 각 기능 설명

### 1️⃣ 프로그램 시작

자동 예약 프로그램을 실행합니다.

**동작 방식:**
- 설정 파일이 없으면 → 자동으로 초기 설정 시작
- 설정 파일이 있으면 → 마스터 패스워드 입력 후 실행

**실행 후:**
- 13시까지 자동 대기
- 13시 정각에 예약 시도
- 예약 성공/실패 로그 출력
- 다음 근무일까지 자동 대기

---

### 2️⃣ 마스터 패스워드 변경

보안을 위해 주기적으로 변경하는 것을 권장합니다.

**절차:**
1. 현재 마스터 패스워드 입력
2. 새 마스터 패스워드 입력 (8자 이상)
3. 새 마스터 패스워드 확인
4. 자동으로 재암호화 및 저장

**주의:**
- 새 패스워드를 안전한 곳에 보관하세요
- 다음 실행부터 새 패스워드를 사용합니다

---

### 3️⃣ 환경 설정 재생성

로그인 정보나 API 키가 변경되었을 때 사용합니다.

**절차:**
1. 기존 설정 파일이 자동 백업됩니다
   - 예: `config.user.yaml.backup.20251102_173000`
2. 새로운 설정을 처음부터 입력합니다
3. 모든 정보 재검증 후 저장

**사용 예:**
- 비밀번호가 변경되었을 때
- 다른 계정으로 변경할 때
- 설정이 손상되었을 때

---

### 4️⃣ 선호 식단 순서 변경

예약하고 싶은 메뉴의 우선순위를 변경합니다.

**메뉴 코드:**
- `샌` : 샌드위치
- `샐` : 샐러드
- `빵` : 베이커리
- `헬` : 헬시세트
- `닭` : 닭가슴살

**입력 예시:**
```
현재: 샌,샐,빵
→ 새로운 순서: 헬,샐,샌
```

**주의:**
- 쉼표(,)로 구분하여 입력
- 공백은 자동으로 제거됩니다
- 마스터 패스워드 필요

---

### 5️⃣ 예약 금지 날짜 관리

휴가, 출장 등으로 예약이 필요 없는 날짜를 관리합니다.

#### 📋 메뉴 구성

```
🏖️ 예약 금지 날짜 관리 (휴가 등)
============================================================

📋 예약 금지 날짜 목록:

번호  날짜          사유                  등록일
------------------------------------------------------------
1     2025-12-25    크리스마스            2025-11-02 17:30:00 📅
2     2025-12-31    연말                  2025-11-02 17:30:00 📅

* ✓ = 지난 날짜

📋 메뉴:
1. 날짜 추가
2. 기간 추가 (여러 날)
3. 날짜 삭제
4. 지난 날짜 일괄 삭제
0. 돌아가기
```

#### 5-1. 날짜 추가

단일 날짜를 추가합니다.

**입력 형식:**
- `YYYYMMDD` : 20251225
- `YYYY-MM-DD` : 2025-12-25

**예시:**
```
날짜: 20251225
사유 (선택, Enter=휴가): 크리스마스

✅ 2025-12-25 (크리스마스) 추가되었습니다.
```

**기능:**
- 과거 날짜 경고
- 중복 날짜 확인 및 덮어쓰기 옵션

#### 5-2. 기간 추가 (여러 날)

연속된 여러 날짜를 한번에 추가합니다.

**예시:**
```
시작 날짜: 20251221
종료 날짜: 20251227

총 7일을 추가합니다.
계속하시겠습니까? (y/N): y

✅ 7일이 추가되었습니다.
```

**사용 예:**
- 1주일 휴가
- 긴 출장 기간
- 연말 연휴

#### 5-3. 날짜 삭제

특정 날짜를 삭제합니다.

**예시:**
```
📋 현재 목록에서 번호 선택

삭제할 날짜의 번호: 1
'2025-12-25'를 삭제하시겠습니까? (y/N): y

✅ 2025-12-25 삭제되었습니다.
```

#### 5-4. 지난 날짜 일괄 삭제

오늘 이전의 모든 날짜를 한번에 삭제합니다.

**예시:**
```
🗑️ 지난 날짜 15개를 삭제하시겠습니까?
계속하시겠습니까? (y/N): y

✅ 15개의 지난 날짜가 삭제되었습니다.
```

**용도:**
- 데이터베이스 정리
- 과거 기록 제거

---

## 💡 사용 시나리오

### 시나리오 1: 최초 실행

```bash
python main.py
```

1. "설정 파일이 없습니다" 메시지 표시
2. Enter 또는 1 입력
3. 초기 설정 진행 (ID, PW, API 키 등)
4. 설정 완료 후 자동으로 프로그램 실행

### 시나리오 2: 정상 실행

```bash
python main.py
```

1. 메인 메뉴 표시
2. Enter 또는 1 입력
3. 마스터 패스워드 입력
4. 프로그램 실행 및 자동 예약

### 시나리오 3: 휴가 등록

```bash
python main.py
```

1. 메뉴에서 `5` 입력
2. `2` (기간 추가) 선택
3. 시작/종료 날짜 입력
4. 사유 입력 (예: "여름휴가")
5. 완료 후 메인 메뉴로 복귀

### 시나리오 4: 메뉴 순서 변경

```bash
python main.py
```

1. 메뉴에서 `4` 입력
2. 마스터 패스워드 입력
3. 현재 순서 확인
4. 새 순서 입력 (예: `헬,샐,샌`)
5. 확인 후 저장

### 시나리오 5: 마스터 패스워드 변경

```bash
python main.py
```

1. 메뉴에서 `2` 입력
2. 현재 마스터 패스워드 입력
3. 새 마스터 패스워드 입력 (8자 이상)
4. 새 마스터 패스워드 확인
5. 자동 재암호화 및 저장

---

## ⚠️ 주의사항

### 보안
- ✅ 마스터 패스워드를 안전하게 보관하세요
- ✅ config.user.yaml 파일을 공유하지 마세요
- ✅ 주기적으로 마스터 패스워드를 변경하세요

### 백업
- ✅ 설정 재생성 시 자동 백업됩니다
- ✅ 백업 파일: `config.user.yaml.backup.YYYYMMDD_HHMMSS`
- ✅ 중요한 변경 전 수동 백업 권장

### 휴가 관리
- ✅ 예약 금지 날짜는 반드시 사전에 등록하세요
- ✅ 지난 날짜는 주기적으로 삭제하여 정리하세요
- ✅ 기간 추가 시 날짜 범위를 신중하게 확인하세요

---

## 🔍 문제 해결

### "설정 파일이 없습니다"
- **해결**: 메뉴에서 1번을 선택하여 초기 설정 진행

### "마스터 패스워드가 올바르지 않습니다"
- **원인**: 잘못된 패스워드 입력
- **해결**: 
  1. 올바른 패스워드 재입력
  2. 패스워드를 잊은 경우 → 메뉴 3번(환경 설정 재생성)

### "로그인 실패"
- **원인**: ID/PW 오류, 계정 잠금
- **해결**: 메뉴 3번으로 설정 재생성

### 예약이 안됨
- **확인사항**:
  1. 13시에 PC가 켜져있는지
  2. 네트워크 연결 확인
  3. 휴가 날짜로 등록되지 않았는지
  4. 로그 파일(`app.log`) 확인

---

## 📊 로그 확인

### 실시간 로그
```bash
tail -f app.log
```

### 최근 100줄
```bash
tail -n 100 app.log
```

### 로그 내용
- `INFO`: 일반 정보 (예약 시도, 대기 등)
- `WARNING`: 경고 (예약 실패 등)
- `ERROR`: 오류 (로그인 실패 등)
- `🏖️`: 휴가 날짜 감지
- `✅`: 예약 성공
- `⚠️`: 예약 실패

---

## 🎯 Best Practices

### 1. 정기 점검
- ✅ 주 1회: 휴가 날짜 확인 및 정리
- ✅ 월 1회: 로그 파일 확인 및 정리
- ✅ 분기 1회: 마스터 패스워드 변경

### 2. 안전한 운영
- ✅ PC 수면 모드 해제 (전원 설정)
- ✅ 13시 전에 PC 부팅 완료
- ✅ 네트워크 안정성 확인

### 3. 데이터 관리
- ✅ 설정 파일 백업 보관
- ✅ 지난 휴가 날짜 정리
- ✅ 예약 기록 주기적 확인

---

## 📞 도움말

### 추가 문서
- `README.md`: 전체 개요 및 설치
- `CODE_REVIEW.md`: 기술적 세부사항
- `SECURITY_IMPROVEMENTS.md`: 보안 개선 내역
- `TEST_REPORT.md`: 테스트 결과

### 테스트 도구
```bash
# 예약 테스트
python test_simple.py reserve

# 취소 테스트  
python test_simple.py cancel
```

---

**즐거운 점심시간 되세요! 🍽️**
